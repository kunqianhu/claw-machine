<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¬ Emoji Claw Machine ğŸ­</title>
<style>
  body {
    background: #ffeef4;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: "Arial", sans-serif;
    margin: 0;
    padding: 20px;
  }

  h1 {
    color: #ff7eb9;
    text-align: center;
    margin-bottom: 10px;
  }

  .machine-container {
    width: 100%;
    max-width: 480px;
    position: relative;
  }

  .machine {
    position: relative;
    width: 100%;
    height: 400px;
    background: linear-gradient(to bottom, #ffe4e1, #ffd9ec);
    border: 6px solid #ffb6c1;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    margin-bottom: 20px;
  }

  .claw {
    position: absolute;
    width: 60px;
    height: 60px;
    top: 20px;
    transition: all 0.5s ease;
    z-index: 100;
    transform-origin: top center;
  }

  .claw .arm {
    position: absolute;
    width: 6px;
    height: 30px;
    background: #888;
    top: 0;
    border-radius: 3px;
    transform-origin: top;
    transition: transform 0.3s ease;
  }

  .claw .arm.left { left: 0; }
  .claw .arm.right { right: 0; }

  .claw .center {
    position: absolute;
    width: 20px;
    height: 20px;
    background: #aaa;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 50%;
  }

  .prize {
    position: absolute;
    font-size: 30px;
    transition: all 0.5s ease;
  }

  .prize.grabbed {
    animation: wobble 0.3s infinite;
  }

  @keyframes wobble {
    0% { transform: translateX(0px) rotate(0deg); }
    25% { transform: translateX(-2px) rotate(-5deg); }
    50% { transform: translateX(2px) rotate(5deg); }
    75% { transform: translateX(-2px) rotate(-5deg); }
    100% { transform: translateX(0px) rotate(0deg); }
  }

  .controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 20px;
  }

  .controls button {
    background: #ffb6c1;
    border: none;
    padding: 10px 20px;
    border-radius: 12px;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    transition: transform 0.2s ease, background 0.2s ease;
  }

  .controls button:hover {
    transform: scale(1.05);
    background: #ff7eb9;
  }

  .collection {
    display: flex;
    gap: 5px;
    flex-wrap: nowrap;
    overflow-x: auto;
    width: 100%;
    max-width: 480px;
    padding: 10px;
    background: #fff0f5;
    border: 2px solid #ffc0cb;
    border-radius: 12px;
  }

  .collection span {
    font-size: 30px;
    transition: transform 0.3s ease;
  }

  .collection span:hover {
    transform: scale(1.2);
  }
</style>
</head>
<body>

<h1>ğŸ¬ Emoji Claw Machine ğŸ­</h1>

<div class="machine-container">
  <div class="machine" id="machine"></div>
</div>

<div class="controls">
  <button id="leftBtn">â† Left</button>
  <button id="grabBtn">ğŸ¯ Grab</button>
  <button id="rightBtn">Right â†’</button>
</div>

<div class="collection" id="collection"></div>

<script>
const machine = document.getElementById('machine');
const collection = document.getElementById('collection');
const clawSize = 60;
let clawX = 210;
let clawY = 20;
let isGrabbing = false;
let grabbedPrize = null;

// Emoji prizes
const PRIZES = ["ğŸ§¸","ğŸ­","ğŸ©","ğŸ¶","ğŸ±","ğŸ","ğŸª€","ğŸª","ğŸ¬","ğŸ’","ğŸ¦„","ğŸŒ¸"];
const prizes = [];
const columns = 6;

// Initialize prizes
for(let col=0; col<columns; col++){
  const stackHeight = Math.floor(Math.random()*3)+3; // 3-5 per column
  for(let row=0; row<stackHeight; row++){
    const prize = document.createElement('div');
    prize.className = 'prize';
    prize.innerText = PRIZES[Math.floor(Math.random()*PRIZES.length)];
    prize.style.left = `${60 + col*70 + (Math.random()-0.5)*20}px`;
    prize.style.top = `${350 - row*45 + (Math.random()-0.5)*10}px`;
    prize.dataset.col = col;
    prize.dataset.row = row;
    prize.dataset.grabbed = "false";
    machine.appendChild(prize);
    prizes.push(prize);
  }
}

// Create claw
const claw = document.createElement('div');
claw.className = 'claw';
claw.style.left = clawX + 'px';
claw.style.top = clawY + 'px';
claw.innerHTML = `<div class="arm left"></div><div class="arm right"></div><div class="center"></div>`;
machine.appendChild(claw);

function moveClaw(direction){
  if(isGrabbing) return;
  const step = 50; // slower step
  clawX += direction==='left' ? -step : step;
  clawX = Math.max(0, Math.min(clawX, machine.clientWidth - clawSize));
  claw.style.left = clawX + 'px';
  if(grabbedPrize){
    grabbedPrize.style.left = (clawX + clawSize/2 - 15) + 'px';
  }
}

async function grabPrize(){
  if(isGrabbing) return;
  isGrabbing = true;

  // Find closest column
  const columnWidth = machine.clientWidth / columns;
  const clawCenterX = clawX + clawSize/2;
  const colIndex = Math.floor(clawCenterX / columnWidth);

  // Find top-most ungrabbed prize in column
  const topPrizes = prizes.filter(p => p.dataset.col==colIndex && p.dataset.grabbed==="false");
  if(topPrizes.length>0){
    const topPrize = topPrizes.reduce((top,p)=>p.offsetTop<top.offsetTop?p:top);
    const targetY = topPrize.offsetTop - clawSize + 10;

    // Lower claw to top prize
    claw.style.transition = 'top 0.8s ease';
    clawY = targetY;
    claw.style.top = clawY + 'px';
    await new Promise(r=>setTimeout(r,800));

    // Close claw arms
    claw.querySelector('.arm.left').style.transform = 'rotate(-15deg)';
    claw.querySelector('.arm.right').style.transform = 'rotate(15deg)';

    // Attempt grab
    if(Math.random()<0.7){
      grabbedPrize = topPrize;
      grabbedPrize.dataset.grabbed = "true";
      grabbedPrize.classList.add('grabbed');
    }
  } else {
    // No prize to grab, lower claw a bit anyway
    claw.style.transition = 'top 0.8s ease';
    clawY = 250;
    claw.style.top = clawY + 'px';
    await new Promise(r=>setTimeout(r,800));
  }

  // Lift claw slowly
  clawY = 20;
  claw.style.transition = 'top 0.8s ease';
  claw.style.top = clawY + 'px';
  if(grabbedPrize){
    grabbedPrize.style.left = (clawX + clawSize/2 - 15) + 'px';
    grabbedPrize.style.top = (clawY + clawSize) + 'px';
  }
  await new Promise(r=>setTimeout(r,800));

  // Move claw to collection slowly
  clawX = 30;
  claw.style.transition = 'left 1s ease';
  claw.style.left = clawX + 'px';
  if(grabbedPrize){
    grabbedPrize.style.left = (clawX + clawSize/2 - 15) + 'px';
  }
  await new Promise(r=>setTimeout(r,1000));

  // Drop prize
  if(grabbedPrize){
    if(Math.random()<0.8){
      collection.appendChild(grabbedPrize);
      grabbedPrize.style.position = 'relative';
      grabbedPrize.style.top = '0px';
      grabbedPrize.style.left = '0px';
    } else {
      grabbedPrize.dataset.grabbed = "false";
      grabbedPrize.style.top = '350px';
    }
    grabbedPrize.classList.remove('grabbed');
    grabbedPrize = null;
  }

  // Open claw
  claw.querySelector('.arm.left').style.transform = 'rotate(-45deg)';
  claw.querySelector('.arm.right').style.transform = 'rotate(45deg)';
  clawX = 210;
  claw.style.transition = 'left 0.5s ease, top 0.5s ease';
  claw.style.left = clawX+'px';
  isGrabbing = false;
}

document.getElementById('leftBtn').onclick = ()=>moveClaw('left');
document.getElementById('rightBtn').onclick = ()=>moveClaw('right');
document.getElementById('grabBtn').onclick = grabPrize;
</script>
</body>
</html>
