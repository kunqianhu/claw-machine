<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emoji Claw Machine</title>
<style>
  body {
    background: #ffeef4;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: "Arial", sans-serif;
    margin: 0;
    padding: 20px;
  }

  h1 {
    color: #ff7eb9;
    text-align: center;
  }

  .machine {
    position: relative;
    width: 480px;
    height: 400px;
    background: linear-gradient(to bottom, #ffe4e1, #ffd9ec);
    border: 6px solid #ffb6c1;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    margin-bottom: 20px;
  }

  .claw {
    position: absolute;
    width: 60px;
    height: 60px;
    top: 20px;
    transition: all 0.3s ease;
    z-index: 100;
  }

  .claw .arm {
    position: absolute;
    width: 6px;
    height: 30px;
    background: #888;
    top: 0;
    border-radius: 3px;
    transform-origin: top;
    transition: transform 0.3s ease;
  }

  .claw .arm.left {
    left: 0;
  }
  .claw .arm.right {
    right: 0;
  }

  .claw .center {
    position: absolute;
    width: 20px;
    height: 20px;
    background: #aaa;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 50%;
  }

  .prize {
    position: absolute;
    font-size: 30px;
    transition: all 0.5s ease;
  }

  .controls {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  .controls button {
    background: #ffb6c1;
    border: none;
    padding: 10px 20px;
    border-radius: 12px;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
    transition: transform 0.2s ease, background 0.2s ease;
  }

  .controls button:hover {
    transform: scale(1.05);
    background: #ff7eb9;
  }

  .collection {
    display: flex;
    gap: 5px;
    flex-wrap: nowrap;
    overflow-x: auto;
    width: 480px;
    padding: 10px;
    background: #fff0f5;
    border: 2px solid #ffc0cb;
    border-radius: 12px;
  }

  .collection span {
    font-size: 30px;
    transition: transform 0.3s ease;
  }

  .collection span:hover {
    transform: scale(1.2);
  }
</style>
</head>
<body>

<h1>🍬 Emoji Claw Machine 🍭</h1>

<div class="machine" id="machine"></div>

<div class="controls">
  <button id="leftBtn">← Left</button>
  <button id="grabBtn">🎯 Grab</button>
  <button id="rightBtn">Right →</button>
</div>

<div class="collection" id="collection"></div>

<script>
  const machine = document.getElementById('machine');
  const collection = document.getElementById('collection');
  const clawSize = 60;
  let clawX = 210;
  let clawY = 20;
  let clawGrabAngle = 45;
  let isGrabbing = false;

  // Emoji prizes
  const PRIZES = ["🧸","🍭","🍩","🐶","🐱","🎁","🪀","🍪","🍬","💎","🦄","🌸"];
  const prizes = [];

  // Initialize prizes
  for(let col=0; col<6; col++){
    const stackHeight = Math.floor(Math.random()*3)+3; // 3-5 per column
    for(let row=0; row<stackHeight; row++){
      const prize = document.createElement('div');
      prize.className = 'prize';
      prize.innerText = PRIZES[Math.floor(Math.random()*PRIZES.length)];
      prize.style.left = `${60 + col*70 + (Math.random()-0.5)*20}px`;
      prize.style.top = `${350 - row*45 + (Math.random()-0.5)*10}px`;
      prize.dataset.grabbed = "false";
      machine.appendChild(prize);
      prizes.push(prize);
    }
  }

  // Create claw
  const claw = document.createElement('div');
  claw.className = 'claw';
  claw.style.left = clawX + 'px';
  claw.style.top = clawY + 'px';
  claw.innerHTML = `<div class="arm left"></div><div class="arm right"></div><div class="center"></div>`;
  machine.appendChild(claw);

  function moveClaw(direction){
    if(isGrabbing) return;
    clawX += direction==='left' ? -70 : 70;
    clawX = Math.max(0, Math.min(clawX, 420));
    claw.style.left = clawX + 'px';
  }

  async function grabPrize(){
    if(isGrabbing) return;
    isGrabbing = true;
    // Lower claw
    claw.style.top = '250px';
    claw.querySelector('.arm.left').style.transform = 'rotate(-15deg)';
    claw.querySelector('.arm.right').style.transform = 'rotate(15deg)';
    await new Promise(r=>setTimeout(r,500));

    // Check prize under claw
    const clawCenterX = clawX + clawSize/2;
    const clawBottomY = 250 + clawSize;
    const grabbable = prizes.filter(p => p.dataset.grabbed === "false" && 
      Math.abs(p.offsetLeft - clawCenterX)<35 && Math.abs(p.offsetTop - clawBottomY)<40);

    let grabbedPrize = null;
    if(grabbable.length>0 && Math.random()<0.7){ // 70% grab chance
      grabbedPrize = grabbable.reduce((top,p)=>p.offsetTop<top.offsetTop?p:top);
      grabbedPrize.dataset.grabbed = "true";
      grabbedPrize.style.left = clawCenterX + 'px';
      grabbedPrize.style.top = (clawBottomY+20) + 'px';
    }

    // Lift claw
    claw.style.top = '20px';
    await new Promise(r=>setTimeout(r,500));

    // Move to collection
    claw.style.left = '30px';
    if(grabbedPrize) grabbedPrize.style.left = '45px';

    await new Promise(r=>setTimeout(r,500));

    // Drop prize
    if(grabbedPrize && Math.random()<0.8){ // 80% keep
      collection.appendChild(grabbedPrize);
      grabbedPrize.style.position = 'relative';
      grabbedPrize.style.top = '0px';
      grabbedPrize.style.left = '0px';
    } else if(grabbedPrize){
      grabbedPrize.dataset.grabbed = "false";
      grabbedPrize.style.top = '350px';
    }

    // Open claw
    claw.querySelector('.arm.left').style.transform = 'rotate(-45deg)';
    claw.querySelector('.arm.right').style.transform = 'rotate(45deg)';
    clawX = 210;
    claw.style.left = clawX+'px';
    isGrabbing = false;
  }

  document.getElementById('leftBtn').onclick = ()=>moveClaw('left');
  document.getElementById('rightBtn').onclick = ()=>moveClaw('right');
  document.getElementById('grabBtn').onclick = grabPrize;

</script>
</body>
</html>
