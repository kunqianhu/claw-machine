<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pastel Claw Machine</title>
<style>
    body {
        background: #fceff1;
        font-family: Arial, sans-serif;
        text-align: center;
        user-select: none;
        margin: 0;
        padding: 0;
    }
    h1 {
        color: #f28ca0;
    }
    #game {
        position: relative;
        display: inline-block;
        background: #fff4f7;
        border: 4px solid #f7c5d0;
        border-radius: 12px;
        overflow: hidden;
        width: 300px;
        height: 400px;
        margin-top: 10px;
    }
    .claw {
        position: absolute;
        top: 0;
        width: 40px;
        height: 40px;
        font-size: 36px;
        transition: top 0.3s;
    }
    .toy {
        position: absolute;
        font-size: 42px; /* Bigger emoji size */
    }
    #controls {
        margin-top: 10px;
    }
    button {
        padding: 8px 14px;
        margin: 5px;
        border: none;
        border-radius: 6px;
        background-color: #f7c5d0;
        font-size: 18px;
        cursor: pointer;
        color: white;
    }
    button:active {
        background-color: #f28ca0;
    }
    #message {
        margin-top: 8px;
        font-size: 18px;
        color: #f28ca0;
        height: 24px;
    }
</style>
</head>
<body>

<h1>üéÄ Pastel Claw Machine üéÄ</h1>

<div id="game">
    <div class="claw" id="claw">ü™ù</div>
</div>

<div id="controls">
    <button id="left">‚¨ÖÔ∏è</button>
    <button id="right">‚û°Ô∏è</button>
    <button id="grab">‚¨áÔ∏è Grab</button>
</div>

<div id="message"></div>

<script>
const game = document.getElementById("game");
const claw = document.getElementById("claw");
const message = document.getElementById("message");

let clawX = 130; // initial center position
let clawY = 0;
let toys = [];
let moveInterval;
const step = 5; // smaller steps for precision
const toySize = 48; // emoji "touching" size

// Spawn overlapping toys
function spawnToys() {
    const toyEmojis = ["üß∏","üêº","üê∞","üê±","üê∂","ü¶Ñ","üê•"];
    for (let i = 0; i < 15; i++) {
        let x = (i % 5) * (toySize - 6) + 10; // overlap a bit
        let y = Math.floor(i / 5) * (toySize - 6) + 200;
        let toy = document.createElement("div");
        toy.className = "toy";
        toy.textContent = toyEmojis[Math.floor(Math.random() * toyEmojis.length)];
        toy.style.left = x + "px";
        toy.style.top = y + "px";
        game.appendChild(toy);
        toys.push({ el: toy, x, y });
    }
}
spawnToys();

function updateClaw() {
    claw.style.left = clawX + "px";
    claw.style.top = clawY + "px";
}

// Hold-to-move controls
function startMove(direction) {
    clearInterval(moveInterval);
    moveInterval = setInterval(() => {
        clawX += direction * step;
        clawX = Math.max(0, Math.min(clawX, game.clientWidth - claw.clientWidth));
        updateClaw();
    }, 50);
}

function stopMove() {
    clearInterval(moveInterval);
}

// Grab function
document.getElementById("grab").addEventListener("click", () => {
    let originalY = clawY;
    clawY = 200;
    updateClaw();

    setTimeout(() => {
        // Find toy directly under claw
        let grabbedToy = toys.find(t => 
            clawX + 20 > t.x && clawX < t.x + toySize &&
            Math.abs(200 - t.y) < 20
        );

        if (grabbedToy) {
            // Chance to fail grab
            if (Math.random() < 0.2) {
                message.textContent = "üòÖ Oops! Missed the grab.";
            } else {
                // Chance to drop on way up
                if (Math.random() < 0.2) {
                    message.textContent = "üò¢ Oops! It slipped!";
                } else {
                    message.textContent = "üéâ You got " + grabbedToy.el.textContent + "!";
                    game.removeChild(grabbedToy.el);
                    toys = toys.filter(t => t !== grabbedToy);
                }
            }
        } else {
            message.textContent = "üòÖ Oops! Missed the grab.";
        }

        clawY = originalY;
        updateClaw();
    }, 500);
});

// Left button hold
document.getElementById("left").addEventListener("mousedown", () => startMove(-1));
document.getElementById("left").addEventListener("touchstart", e => { e.preventDefault(); startMove(-1); });
document.getElementById("left").addEventListener("mouseup", stopMove);
document.getElementById("left").addEventListener("mouseleave", stopMove);
document.getElementById("left").addEventListener("touchend", stopMove);

// Right button hold
document.getElementById("right").addEventListener("mousedown", () => startMove(1));
document.getElementById("right").addEventListener("touchstart", e => { e.preventDefault(); startMove(1); });
document.getElementById("right").addEventListener("mouseup", stopMove);
document.getElementById("right").addEventListener("mouseleave", stopMove);
document.getElementById("right").addEventListener("touchend", stopMove);

updateClaw();
</script>

</body>
</html>
